# 네트워크
## 웹 브라우저에 URL을 입력하면 일어나는 일
1. `www.naver.com` 을 검색한다.
2. DNS lookup 을 수행한다.
   -  브라우저 -> hosts 파일 -> DNS cache 순서로 도메인에 매칭되는 ip 를 찾는다.
   -  hosts 파일을 찾아본다.
   -  없다면 DNS cache 기록을 확인한다.
   -  없다면 DNS 서버에 질의를 하고, 응답을 얻어 ip 주소를 획득한다. (GSLB, CDN)
3. naver 서버에 tcp 연결을 시도한다. (3-way handshaking)
4. tcp 연결에 성공하면 http request 를 보낸다. (GET)
5. http response 응답을 받는다.
6. 브라우저가 컨텐츠를 보여준다.

### CDN, GSLB를 사용하는 이유?
- 가장 최적의 서버 환경을 찾아 클라이언트의 대기시간을 줄이기 위해 사용한다.
- CDN (Content Delivery Network)
  - 전 세계에 분산되어 있는 네트워크를 말한다. 각 세계에 서버가 퍼져있기 때문에 지연 시간을 감소시켜 요청/응답을 빠르게 받을 수 있다.
- GSLB (Global Server Load Balance)
  - 클라이언트가 컨텐츠 요청이 있는 경우 가장 최적의 서버를 찾아주는 역할을 한다.
  - 서버가 살아있는지 실시간으로 상태를 확인 `(health check)` 하여 정상적으로 동작하는 ip를 응답한다.

## URL vs. URI vs. URN
- URL은 Location 으로 리소스를 구분하며 일반적인 도메인을 의미한다.
- URI은 Identifier 으로 식별자를 구분하며 수신하는 기기에 맞게 반환한다. (tel:010)
- URN은 자원의 name 으로 구분하며, 리소스 자체에 부여된 영구적이고 유일한 이름이다.

## http 의 무상태성과 비연결성
- 서버와 클라이언트의 연결 상태가 유지되지 않고, 상태 정보를 저장하지 않는다.
- 단점 -> 사용자를 식별할 수 없다. 이를 해결하기 위해 쿠키와 세션을 사용한다.

## TCP 의 3,4 way handshake
- TCP는 연결지향형 프로토콜이다.
- 서버와 클라이언트가 데이터를 송수신하기 전에 3-way handshaking 으로 연결을 맺는다.
- 서버와 클라이언트가 4-way handshaking 으로 연결을 종료한다.
- 
### 3-way handshaking
1. 송신측이 수신측에 `SYN` 세그먼트를 보내 연결 설정을 요청한다.
2. 수신측이 송신측에 수신 확인으로 `SYN` 세그먼트와 `ACK` 를 전송한다.
3. 송신측이 수신측에 응답 세그먼트의 확인 응답으로 `ACK` 를 보낸다.

### 4-way handshaking
1. 송신측이 수신측에 `FIN` 세그먼트를 보내 연결 해제를 요청한다.
2. 수신측이 송신측에 확인 응답으로 `ACK` 세그먼트를 전송한다.
3. 수신측이 송신측에 `FIN` 세그먼트를 전송하여 연결 해제를 요청한다.
4. 송신측이 수신측에 응답 세그먼트의 확인 응답으로 `ACK` 를 보낸다.

## http와 https의 차이점은?
- http
  - 인터넷 상에서 클라이언트와 서버가 자원을 주고 받을 때 사용하는 통신 규약이다.
  - http는 텍스트 교환이므로 누군가 네트워크 패킷을 가로채면 내용이 노출되는 보안 이슈가 존재한다. 이것을 해결하기 위해 나온 것이 https이다.
    - 80 포트 사용
- https
  - ssl 프로토콜을 사용하는 통신 규약이다.
  - https는 대칭키, 공개키 암호화 방식을 함께 사용한다.
    - 서버와 클라이언트가 빠른 통신을 위해 대칭키를 사용한다.
    - 이 대칭키(세션키)를 공유하기 위해 공개키를 사용한다.
  - 443 포트 사용

## https의 동작 방식
- https는 빠른 데이터 교환을 위해 대칭키를 사용한다.
- 그러나 대칭키를 교환하기 위해서 최초에 공개키 방식을 사용하여 키를 교환한다.
    1. 클라이언트가 서버로 최초 연결 시도
    2. 서버가 공개키(인증서)를 클라이언트에게 전달
    3. 클라이언트는 인증서의 유효성 검사 후 세션키 발급
    4. 클라이언트는 세션키를 보관 + 서버의 공개키로 세션키 암호화하여 서버로 전송
    5. 서버는 개인키로 복호화하여 세션키 획득
    6. 클라이언트와 서버는 동일한 세션키 공유하므로 데이터 전달 시 세션키로 암복호화 진행

## GET 과 POST의 차이는?
- GET
  - 서버에 존재하는 데이터를 조회
  - URL에 쿼리 스트링으로 조회
  - 캐싱 가능, 속도가 빠르다.
- POST
  - 서버에 데이터 생성 요청
  - HTTP 바디에 담아서 전송
  - 멱등성이 보장되지 않는다.
