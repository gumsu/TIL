# 데이터베이스
## 데이터베이스를 사용하는 이유
- 데이터베이스 이전에 파일 시스템을 사용했다.
  - 파일 시스템은 데이터를 각각 파일 단위로 저장하는 것이다.
  - 파일 단위로 저장하게 된다면? 데이터의 종속성, 중복성, 무결성 문제가 존재한다.
- 데이터베이스 특징
  - 독립성, 무결성, 보안성, 일관성, 중복 최소화

## 인덱스를 사용하는 이유
- 원하는 자료를 쉽고 빠르게 찾기 위해서 사용한다.

### 클러스터 인덱스, 보조 인덱스
- mysql은 클러스터 인덱스와 보조 인덱스를 함께 사용한다.
- 클러스터 인덱스
  - 테이블 당 하나만 생성 가능하다.
  - 키 값에 따라 정렬되어 있다.
  - 기본 키를 지정하지 않는다면 먼저 나오는 unique 속성에 대해서 생성, unique 속성이 없다면 mysql이 자체 생성한 행번호를 사용한다.
- 보조 인덱스
  - 테이블 당 여러 개 생성 가능하다.

### 인덱스 생성 시 고려해야할 사항들은 무엇일까?
- 기본키는 좁은 범위
- `UPDATE`, `DELETE` 가 자주 일어나지 않는 컬럼
- `WHERE`, `ORDER BY`, `JOIN` 에 자주 사용되는 컬럼
- 인덱스의 순서도 중요하다.
  ```sql
  select * from t where name = 'kim' and address = 'seoul' 
  ```
  - 각각의 단일 인덱스보다 idx(name, address) 가 더 빠르다. 그러나 다중 인덱스는 address 단일 조건으로 검색할 경우 사용할 수 없다.

### 인덱스에 hash table이 아닌 b+tree 를 사용하는 이유
- 인덱스는 정렬이 필요하다. 부등호 연산도 필요하다.
- hash table
  - 해시 값을 계산해서 인덱싱 하므로 매우 빠른 검색이 가능하다. 그러나 값을 변형해서 인덱싱하므로 특정 문자로 시작하는 값 검색 등의 일부 검색이 불가능하다.
  - 동등 연산에만 특화되어 있다. 범위 연산이 어렵다.

### 인덱스를 많이 생성하면 좋은 것일까?
- 인덱스도 결국 테이블 형태로 메모리에 저장한다.
- 인덱스를 생성하게 되면, INSERT UPDATE DELETE 수행 시 별도의 과정의 추가적으로 발생한다.
